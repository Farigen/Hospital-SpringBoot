webpackJsonp([9],{MnMz:function(t,e){},RhxL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtWM"),i=a.n(s),r=a("mw3O"),n=a.n(r),l={name:"singleDate",props:{register:Object},data:function(){return{isAvailable:!0,displayAM8:!1,displayAM10:!1,displayPM:!1,date:Date,dateString:""}},mounted:function(){this.date=new Date(this.register.dateTime.substr(5,2)+" "+this.register.dateTime.substr(8,2)+","+this.register.dateTime.substr(0,4)+" "+this.register.dateTime.substr(11,8)),this.dateString=this.getDateString(this.date),0===this.register.availableNum&&(this.isAvailable=!1)},methods:{handleIsAvailable:function(){switch(this.date.getHours()){case 8:this.displayAM8=!this.displayAM8;break;case 10:this.displayAM10=!this.displayAM10;break;case 14:this.displayPM=!this.displayPM}},handleSubmit:function(){if(""!==this.$store.state.userId)i.a.post("/addPatientOrder",n.a.stringify({registerId:this.register.id,userId:this.$store.state.userId})).then(function(t){"success"===t.data.flag?alert("预约成功！"):alert("预约失败！")}).catch(function(t){console.log(t)});else{alert("请先登录！本页面将在两秒后跳转到登录页面!");var t=this;setTimeout(function(){t.$router.push({path:"/login"})},2e3)}},getDateString:function(t){var e=new Date;if(t.getTime()===e.getTime())return alert(t.getTime()+" : "+e.getTime()),t.getHours()<=12?"今天上午":"今天下午";var a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();return t.getHours()<=12?a+"月"+s+"日 "+this.getWeek(t.getDay())+" 上午":a+"月"+s+"日 "+this.getWeek(t.getDay())+" 下午"},getWeek:function(t){return"星期"+"日一二三四五六".charAt(t)}},computed:{availableButton:function(){return!0===this.isAvailable?"有号":"无号"}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("el-card",{staticClass:"singleDate"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:6,offset:1}},[a("span",[t._v(t._s(t.dateString))])]),t._v(" "),a("el-col",{attrs:{span:3,offset:14}},[a("el-button",{staticClass:"submit-button",attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleIsAvailable(e)}}},[t._v(t._s(t.availableButton))])],1)],1),t._v(" "),t.displayAM8?a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:10,offset:1}},[a("el-card",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("08:00-10:00")])]),t._v(" "),a("el-col",{attrs:{span:8,offset:4}},[a("el-button",{staticClass:"submit-button",attrs:{type:"primary",disabled:!t.isAvailable},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t._v("预约")])],1)],1)],1)],1)],1):t._e(),t._v(" "),t.displayAM10?a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:10,offset:1}},[a("el-card",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("10:00-12:00")])]),t._v(" "),a("el-col",{attrs:{span:8,offset:4}},[a("el-button",{staticClass:"submit-button",attrs:{type:"primary",disabled:!t.isAvailable},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t._v("预约")])],1)],1)],1)],1)],1):t._e(),t._v(" "),t.displayPM?a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:10,offset:1}},[a("el-card",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("14:30-16:30")])]),t._v(" "),a("el-col",{attrs:{span:8,offset:4}},[a("el-button",{staticClass:"submit-button",attrs:{type:"primary",disabled:!t.isAvailable},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t._v("预约")])],1)],1)],1)],1)],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var u={name:"dateList",components:{SingleDate:a("VU/8")(l,o,!1,function(t){a("MnMz")},"data-v-054af95d",null).exports},data:function(){return{dept:"",registers:[],dateArray:[]}},mounted:function(){var t=this;i.a.post("/getRegisterByDocName",n.a.stringify({docName:this.$route.params.doc})).then(function(e){t.registers=e.data}).catch(function(t){console.log(t)})},methods:{getTimeArrayOfNormal:function(){var t=[],e=new Date,a=e.getHours();a<=12?(t.push("今天上午"),t.push("今天下午")):12<a&&t.push("今天下午");for(var s=e.getMonth(),i=e.getDate(),r=e.getFullYear(),n=e.getDay(),l=1;l<7;l++){var o=new Date(r,s+1,0).getDate(),u=i+l<o?i+l:1,c=i+l<o?s:s+1,d=n+l<7?n+l:0;c=c+1<10?"0"+(c+1):c+1,u=u<10?"0"+u:u,t.push(c+"月"+u+"日 "+this.getWeek(d)+" 上午"),t.push(c+"月"+u+"日 "+this.getWeek(d)+" 下午")}this.timeArrayOfNormal=t},nowTimes:function(){this.getTimeArrayOfNormal(),setInterval(this.nowTimes,3e4)}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-card",[e("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e("span",[this._v("预约挂号")])]),this._v(" "),e("div",{staticClass:"reservation-time"},[e("ul",this._l(this.registers,function(t,a){return e("SingleDate",{key:a,attrs:{register:t}})}),1)])])},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(t){a("yEAo")},"data-v-e0d6db30",null);e.default=d.exports},yEAo:function(t,e){}});
//# sourceMappingURL=9.3dd9a32bb9759b24de25.js.map