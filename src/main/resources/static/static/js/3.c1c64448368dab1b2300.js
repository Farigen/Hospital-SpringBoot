webpackJsonp([3],{Cdx3:function(e,t,o){var n=o("sB3e"),r=o("lktj");o("uqUo")("keys",function(){return function(e){return r(n(e))}})},Dbpt:function(e,t){},"T+/8":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("fZjL"),r=o.n(n),i=o("Dd8w"),a=o.n(i),s=(o("E4LH"),o("jNJV")),c=o("S9KT"),l=o("mtWM"),u=o.n(l),d=o("mw3O"),p=o.n(d),f=o("7+uW"),m=o("NYxO"),g=(new(f.default.extend({template:'<el-image id="imgVerifyCode"  style="margin-left:20px;margin-top:10px;cursor:pointer;" @click.native="changeVerifyCode" :src="codeSrc"  alt=""/>',computed:{codeSrc:function(){return"/getVerifyCode?name=loginCode&key="+(new Date).getTime()}},methods:{changeVerifyCode:function(){document.getElementById("imgVerifyCode").src="/getVerifyCode?name=loginCode&key="+(new Date).getTime()}}}))).$mount(),v={name:"Login",components:{MyHeader:s.a,MyFooter:c.a},data:function(){var e=this;return{loginForm:{username:"18251806718",password:"123456",verificationCode:""},loginRules:{username:[{required:!0,trigger:"blur",validator:function e(t,o,n){e()?n():n(new Error("请输入正确的手机号！"))}}],password:[{required:!0,trigger:"blur",validator:function(e,t,o){t.length<6?o(new Error("密码不能少于6位！")):o()}}],verificationCode:[{required:!0,trigger:"blur",validator:function(t,o,n){/^\d{6}$/.test(o)?(u.a.defaults.withCredentials=!0,u.a.post("/checkVerifyCode",p.a.stringify({name:"loginCode",code:e.loginForm.verificationCode})).then(function(t){"no"===t.data.flag?(e.loginForm.isVerificationCodeTrue=!1,n(new Error(t.data.message))):(e.loginForm.isVerificationCodeTrue=!0,n())}).catch(function(e){console.log(e)})):(e.loginForm.isVerificationCodeTrue=!1,n(new Error("输入6位数字验证码")))}}]},passwordType:"password",capsTooltip:!1,loading:!1,isVerificationCodeTrue:!0,redirect:void 0,otherQuery:{},userToken:""}},created:function(){},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),document.getElementById("codeImage").appendChild(g.$el)},destroyed:function(){},methods:a()({},Object(m.b)(["changeLogin"]),{checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,o=e.key;o&&1===o.length&&(this.capsTooltip=!!(t&&o>="a"&&o<="z"||!t&&o>="A"&&o<="Z")),"CapsLock"===o&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})},handleLogin:function(){var e=this;if(!1!==this.loginForm.isVerificationCodeTrue){var t="";u.a.post("/doLogin",p.a.stringify({userName:this.loginForm.username,password:this.loginForm.password})).then(function(o){"success"===o.data.message?(e.userToken=o.data.token,t=null==o.data.user.name?o.data.user.phoneNumber:o.data.user.name,e.changeLogin({Authorization:e.userToken,userName:t,userId:o.data.user.id}),e.$router.push({path:"/"})):alert(o.data.message)}).catch(function(e){alert("Error:"+e),console.log(e)})}},getOtherQuery:function(e){return r()(e).reduce(function(t,o){return"redirect"!==o&&(t[o]=e[o]),t},{})},register:function(){this.$router.push({path:"/register"})}})},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[o("MyHeader"),e._v(" "),o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[o("div",{staticClass:"title-container"},[o("h3",{staticClass:"title"},[e._v("用户登录")])]),e._v(" "),o("el-form-item",{attrs:{prop:"phoneNumber"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),o("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),o("el-tooltip",{attrs:{content:"大写已锁定！",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),o("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{prop:"verificationCode"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),o("el-input",{ref:"verificationCode",staticClass:"verificationCodeInput",attrs:{name:"verificationCode",type:"text",tabindex:"3",autocomplete:"on"},model:{value:e.loginForm.verificationCode,callback:function(t){e.$set(e.loginForm,"verificationCode",t)},expression:"loginForm.verificationCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8,id:"codeImage"}})],1),e._v(" "),o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")]),e._v(" "),o("div",{staticStyle:{position:"relative","margin-top":"30px"}},[o("el-button",{staticClass:"thirdparty-button",attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.register(t)}}},[e._v("\n        注册\n      ")])],1)],1),e._v(" "),o("my-footer")],1)},staticRenderFns:[]};var y=o("VU/8")(v,h,!1,function(e){o("l3lf"),o("Dbpt")},"data-v-05f045f0",null);t.default=y.exports},fZjL:function(e,t,o){e.exports={default:o("jFbC"),__esModule:!0}},jFbC:function(e,t,o){o("Cdx3"),e.exports=o("FeBl").Object.keys},l3lf:function(e,t){},uqUo:function(e,t,o){var n=o("kM2E"),r=o("FeBl"),i=o("S82l");e.exports=function(e,t){var o=(r.Object||{})[e]||Object[e],a={};a[e]=t(o),n(n.S+n.F*i(function(){o(1)}),"Object",a)}}});
//# sourceMappingURL=3.c1c64448368dab1b2300.js.map